var isBlogSettingsMax=0;let offsetX,offsetY,onMove=!1;const BlogSettingContainer=document.querySelector(".blogSettingContainer");let oddStyle=window.getComputedStyle(BlogSettingContainer);const dragElement=document.querySelector(".drag-bar");function BlogSettingOnMouseDown(e){onMove=!0,offsetX=e.offsetX,offsetY=e.offsetY,document.addEventListener("mousemove",BlogSettingOnMouseMove),document.addEventListener("mouseup",BlogSettingOnMouseUp)}function BlogSettingOnMouseMove(e){if(onMove){let t=parseFloat(oddStyle.width),n=parseFloat(oddStyle.height);BlogSettingContainer.style.left=`${Math.min(window.innerWidth-t,Math.max(0,e.clientX-offsetX))}px`,BlogSettingContainer.style.top=`${Math.min(window.innerHeight-n,Math.max(0,e.clientY-offsetY))}px`}}function BlogSettingOnMouseUp(){onMove=!1,document.removeEventListener("mousemove",BlogSettingOnMouseMove),document.removeEventListener("mouseup",BlogSettingOnMouseUp)}function onResize(e,t,n){let o=window.getComputedStyle(BlogSettingContainer),l=parseFloat(o[n]),i=parseFloat(o.left),r=parseFloat(o.top),d="width"===n?e.clientX-i:e.clientY-r;if(".edge-right"!==t&&".edge-bottom"!==t||(BlogSettingContainer.style[n]=`${Math.min(".edge-right"===t?window.innerWidth-i:window.innerHeight-r,Math.max(200,d))}px`),".edge-top"===t||".edge-left"===t){let t="width"===n?i-Math.max(0,e.clientX):r-Math.max(0,e.clientY);BlogSettingContainer.style[n]=`${Math.max(200,l+t)}px`,"width"===n?BlogSettingContainer.style.left=`${Math.max(0,e.clientX)}px`:"height"===n&&(BlogSettingContainer.style.top=`${Math.max(0,e.clientY)}px`)}}function resizeOnEdge(e,t){function n(n){onResize(n,e,t)}function o(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",o)}document.querySelector(e).addEventListener("mousedown",(()=>{document.addEventListener("mousemove",n),document.addEventListener("mouseup",o)}))}function onResizeCorner(e,t){let n=parseFloat(oddStyle.left),o=parseFloat(oddStyle.top),l=parseFloat(oddStyle.width),i=parseFloat(oddStyle.height),r=e.clientX-n,d=e.clientY-o,a=n-Math.max(0,e.clientX),g=o-Math.max(0,e.clientY);return".corner-rt"===t?(BlogSettingContainer.style.top=`${Math.max(0,e.clientY)}px`,BlogSettingContainer.style.width=`${Math.max(200,r)}px`,void(BlogSettingContainer.style.height=`${Math.max(200,i+g)}px`)):".corner-lt"===t?(BlogSettingContainer.style.top=`${Math.max(0,e.clientY)}px`,BlogSettingContainer.style.left=`${Math.max(0,e.clientX)}px`,BlogSettingContainer.style.width=`${Math.max(200,l+a)}px`,void(BlogSettingContainer.style.height=`${Math.max(200,i+g)}px`)):".corner-lb"===t?(BlogSettingContainer.style.left=`${Math.max(0,e.clientX)}px`,BlogSettingContainer.style.width=`${Math.max(200,l+a)}px`,void(BlogSettingContainer.style.height=`${Math.max(200,d)}px`)):(BlogSettingContainer.style.width=`${Math.min(window.innerWidth-n,Math.max(200,r))}px`,void(BlogSettingContainer.style.height=`${Math.min(window.innerHeight-o,Math.max(200,d))}px`))}function resizeOnCorner(e){function t(t){onResizeCorner(t,e)}function n(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n)}document.querySelector(e).addEventListener("mousedown",(()=>{document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}))}function openBlogSettings(){var e=document.getElementById("blogSetting");e.style.display="unset",e.style.top="10px",e.style.left="10px",e.style.width="690px",e.style.height="400px",e.style.removeProperty("border"),e.style.removeProperty("border-radius")}function BlogSettingsMax(){var e=document.getElementById("blogSetting");isBlogSettingsMax%2==0?(e.style.display="unset",e.style.top="0px",e.style.left="0px",e.style.width="calc(100vw - 0px)",e.style.height="100vh",e.style.borderRadius="0",e.style.border="0",isBlogSettingsMax++):(openBlogSettings(),isBlogSettingsMax++)}function ToPage(e){document.getElementById("console-home").style.display="none","font"==e&&(document.getElementById("console-font").style.display="flex",document.getElementById("console-title").innerHTML="字体"),"display"==e&&(document.getElementById("console-display").style.display="flex",document.getElementById("console-title").innerHTML="显示"),"background"==e&&(document.getElementById("console-background").style.display="flex",document.getElementById("console-title").innerText="背景")}function ReturnHome(){document.getElementById("console-home").style.display="unset",document.getElementById("console-font").style.display="none",document.getElementById("console-display").style.display="none",document.getElementById("console-background").style.display="none",document.getElementById("console-title").innerHTML="博客设置"}function TurnFont(e,t=!0,n=!1){if(e!=localStorage.getItem("blogSet-font")||n){t&&btf.snackbarShow("正在加载字体..."),"System"==e&&(document.body.style.fontFamily="none",localStorage.setItem("blogSet-font","System")),new FontFace("customFont",`url(${e})`,{display:"swap"}).load().then((function(e){document.fonts.add(e),document.body.style.fontFamily="customFont"}));(function(){return new Promise((function(t,n){e||(n("无效路径"),btf.snackbarShow("Url 无效")),$.ajax({url:e,type:"GET",dataType:"jsonp",complete:e=>{200==e.status?t(!0):t(!1)}})}))})(e).then((n=>{if(n){t&&btf.snackbarShow("字体设置成功"),localStorage.setItem("blogSet-font",e);var o=localStorage.getItem("blogSet-font");"https://cdn.cbd.int/anzhiyu-blog@1.1.6/fonts/ZhuZiAWan.woff2"==o?document.getElementById("nowFont").innerHTML="当前字体：筑紫A丸标准体":"System"==o?document.getElementById("nowFont").innerHTML="当前字体：系统默认":"https://pic.daiyu.fun/pic/2022/12/202212261442864.woff2"==o?document.getElementById("nowFont").innerHTML="当前字体：汉仪唐美人":"https://pic.daiyu.fun/pic/2022/12/202212261442865.woff2"==o?document.getElementById("nowFont").innerHTML="当前字体：得意黑":"https://pic.daiyu.fun/picgo/202306100940505.ttf"==o?document.getElementById("nowFont").innerHTML="当前字体：MiSans":(document.getElementById("nowFont").innerHTML="当前字体："+o,TurnFont(o))}else"System"!=e&&btf.snackbarShow("字体加载失败"),"System"==localStorage.getItem("blogSet-font")&&(document.getElementById("nowFont").innerHTML="当前字体：系统默认")}))}else t&&btf.snackbarShow("当前设置项与原项相同")}function BlogSettingTransparency(){document.getElementById("blogSettingTransparency").innerHTML=document.getElementById("transparencyInput").value+"%",localStorage.setItem("blogSet-transparency",document.getElementById("transparencyInput").value),document.documentElement.style.setProperty("--blogSetting-transparency",document.getElementById("transparencyInput").value+"%")}function BlogSettingBorderRadius(){document.getElementById("blogSettingBorderRadius").innerHTML=document.getElementById("borderRadiusInput").value+"px",localStorage.setItem("blogSet-borderRadius",document.getElementById("borderRadiusInput").value),document.documentElement.style.setProperty("--blogSetting-borderRadius",document.getElementById("borderRadiusInput").value+"px")}function BlogSettingColorBackground(){localStorage.setItem("blogSet-background",document.querySelector("#colorBackgroundInput").value),BlogSettingUpdateBackground()}function BlogSettingImgBackground(){localStorage.setItem("blogSet-background",`url(${document.querySelector("#imgBackgroundInput").value})`),BlogSettingUpdateBackground()}function BlogSettingCSSBackground(){localStorage.setItem("blogSet-background",document.querySelector("#cssBackgroundInput").value),BlogSettingUpdateBackground()}function BlogSettingDefultBackground(){localStorage.setItem("blogSet-background","url(/img/background.png)"),BlogSettingUpdateBackground()}function BlogSettingUpdateBackground(){document.querySelector("#nowBackground").innerHTML="当前背景："+localStorage.getItem("blogSet-background"),document.querySelector("#web_bg").style.background=localStorage.getItem("blogSet-background"),document.querySelector("#web_bg").style.backgroundAttachment="local",document.querySelector("#web_bg").style.backgroundRepeat="no-repeat",document.querySelector("#web_bg").style.backgroundPosition="center",document.querySelector("#web_bg").style.backgroundSize="cover"}dragElement.addEventListener("mousedown",BlogSettingOnMouseDown),resizeOnEdge(".edge-right","width"),resizeOnEdge(".edge-left","width"),resizeOnEdge(".edge-top","height"),resizeOnEdge(".edge-bottom","height"),resizeOnCorner(".corner-rb"),resizeOnCorner(".corner-rt"),resizeOnCorner(".corner-lt"),resizeOnCorner(".corner-lb");