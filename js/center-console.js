var isBlogSettingsMax=0;let offsetX,offsetY,onMove=!1;const container=document.querySelector(".container");let oddStyle=window.getComputedStyle(container);const dragElement=document.querySelector(".drag-bar");function onMouseDown(e){onMove=!0,offsetX=e.offsetX,offsetY=e.offsetY,document.addEventListener("mousemove",onMouseMove),document.addEventListener("mouseup",onMouseUp)}function onMouseMove(e){if(onMove){let t=parseFloat(oddStyle.width),n=parseFloat(oddStyle.height);container.style.left=`${Math.min(window.innerWidth-t,Math.max(0,e.clientX-offsetX))}px`,container.style.top=`${Math.min(window.innerHeight-n,Math.max(0,e.clientY-offsetY))}px`}}function onMouseUp(){onMove=!1,document.removeEventListener("mousemove",onMouseMove),document.removeEventListener("mouseup",onMouseUp)}function onResize(e,t,n){let o=window.getComputedStyle(container),i=parseFloat(o[n]),l=parseFloat(o.left),s=parseFloat(o.top),d="width"===n?e.clientX-l:e.clientY-s;if(".edge-right"!==t&&".edge-bottom"!==t||(container.style[n]=`${Math.min(".edge-right"===t?window.innerWidth-l:window.innerHeight-s,Math.max(200,d))}px`),".edge-top"===t||".edge-left"===t){let t="width"===n?l-Math.max(0,e.clientX):s-Math.max(0,e.clientY);container.style[n]=`${Math.max(200,i+t)}px`,"width"===n?container.style.left=`${Math.max(0,e.clientX)}px`:"height"===n&&(container.style.top=`${Math.max(0,e.clientY)}px`)}}function resizeOnEdge(e,t){function n(n){onResize(n,e,t)}function o(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",o)}document.querySelector(e).addEventListener("mousedown",(()=>{document.addEventListener("mousemove",n),document.addEventListener("mouseup",o)}))}function onResizeCorner(e,t){let n=parseFloat(oddStyle.left),o=parseFloat(oddStyle.top),i=parseFloat(oddStyle.width),l=parseFloat(oddStyle.height),s=e.clientX-n,d=e.clientY-o,a=n-Math.max(0,e.clientX),r=o-Math.max(0,e.clientY);return".corner-rt"===t?(container.style.top=`${Math.max(0,e.clientY)}px`,container.style.width=`${Math.max(200,s)}px`,void(container.style.height=`${Math.max(200,l+r)}px`)):".corner-lt"===t?(container.style.top=`${Math.max(0,e.clientY)}px`,container.style.left=`${Math.max(0,e.clientX)}px`,container.style.width=`${Math.max(200,i+a)}px`,void(container.style.height=`${Math.max(200,l+r)}px`)):".corner-lb"===t?(container.style.left=`${Math.max(0,e.clientX)}px`,container.style.width=`${Math.max(200,i+a)}px`,void(container.style.height=`${Math.max(200,d)}px`)):(container.style.width=`${Math.min(window.innerWidth-n,Math.max(200,s))}px`,void(container.style.height=`${Math.min(window.innerHeight-o,Math.max(200,d))}px`))}function resizeOnCorner(e){function t(t){onResizeCorner(t,e)}function n(){document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n)}document.querySelector(e).addEventListener("mousedown",(()=>{document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}))}function openBlogSettings(){var e=document.getElementById("blogSetting");e.style.display="unset",e.style.top="10px",e.style.left="10px",e.style.width="690px",e.style.height="400px",e.style.removeProperty("border"),e.style.removeProperty("border-radius")}function BlogSettingsMax(){var e=document.getElementById("blogSetting");isBlogSettingsMax%2==0?(e.style.display="unset",e.style.top="0px",e.style.left="0px",e.style.width="calc(100vw - 0px)",e.style.height="100vh",e.style.borderRadius="0",e.style.border="0",isBlogSettingsMax++):(openBlogSettings(),isBlogSettingsMax++)}function ToPage(e){document.getElementById("console-home").style.display="none","font"==e&&(document.getElementById("console-font").style.display="flex",document.getElementById("console-title").innerHTML="字体"),"display"==e&&(document.getElementById("console-display").style.display="flex",document.getElementById("console-title").innerHTML="显示"),"background"==e&&(document.getElementById("console-background").style.display="flex",document.getElementById("console-title").innerText="背景")}function ReturnHome(){document.getElementById("console-home").style.display="unset",document.getElementById("console-font").style.display="none",document.getElementById("console-display").style.display="none",document.getElementById("console-background").style.display="none",document.getElementById("console-title").innerHTML="博客设置"}function TurnFont(e,t=!0,n=!1){if(e!=localStorage.getItem("blogSet-font")||n){t&&btf.snackbarShow("正在加载字体..."),"System"==e&&(document.body.style.fontFamily="none",localStorage.setItem("blogSet-font","System")),new FontFace("customFont",`url(${e})`,{display:"swap"}).load().then((function(e){document.fonts.add(e),document.body.style.fontFamily="customFont"}));(function(){return new Promise((function(t,n){e||(n("无效路径"),btf.snackbarShow("Url 无效")),$.ajax({url:e,type:"GET",dataType:"jsonp",complete:e=>{200==e.status?t(!0):t(!1)}})}))})(e).then((n=>{if(n){t&&btf.snackbarShow("字体设置成功"),localStorage.setItem("blogSet-font",e);var o=localStorage.getItem("blogSet-font");"https://cdn.cbd.int/anzhiyu-blog@1.1.6/fonts/ZhuZiAWan.woff2"==o?document.getElementById("nowFont").innerHTML="当前字体：博客默认":"System"==o?document.getElementById("nowFont").innerHTML="当前字体：系统默认":"https://pic.daiyu.fun/pic/2022/12/202212261442864.woff2"==o?document.getElementById("nowFont").innerHTML="当前字体：汉仪唐美人":"https://pic.daiyu.fun/pic/2022/12/202212261442865.woff2"==o?document.getElementById("nowFont").innerHTML="当前字体：得意黑":"https://pic.daiyu.fun/picgo/202306100940505.ttf"==o?document.getElementById("nowFont").innerHTML="当前字体：MiSans":(document.getElementById("nowFont").innerHTML="当前字体："+o,TurnFont(o))}else"System"!=e&&btf.snackbarShow("字体加载失败"),"System"==localStorage.getItem("blogSet-font")&&(document.getElementById("nowFont").innerHTML="当前字体：系统默认")}))}else t&&btf.snackbarShow("当前设置项与原项相同")}dragElement.addEventListener("mousedown",onMouseDown),resizeOnEdge(".edge-right","width"),resizeOnEdge(".edge-left","width"),resizeOnEdge(".edge-top","height"),resizeOnEdge(".edge-bottom","height"),resizeOnCorner(".corner-rb"),resizeOnCorner(".corner-rt"),resizeOnCorner(".corner-lt"),resizeOnCorner(".corner-lb");